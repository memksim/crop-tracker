# üå± Crop Tracker

–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π backend-—Å–µ—Ä–≤–∏—Å –û–ì–ê–£ –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –ø–æ–ª–µ–π, –ø–æ—Å–µ–≤–æ–≤ –∏ —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç–∏, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Go. 
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –∫–∞–∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —É—á–µ–±–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å 
–ø–æ–ª–µ–∑–µ–Ω –≤ –∞–≥—Ä–æ—Å—Ñ–µ—Ä–µ –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ —É—á–µ—Ç–∞ —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

## üì¶ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è–º–∏**
  - –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª–µ–π
  - –£—á–µ—Ç –ø–ª–æ—â–∞–¥–∏ –∏ —Ä–µ–≥–∏–æ–Ω–∞
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å–µ–≤–∞–º–∏**
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–∞—Ç—ã –ø–æ—Å–µ–≤–∞
  - –£—á–µ—Ç –∫—É–ª—å—Ç—É—Ä –∏ —É—á–∞—Å—Ç–∫–æ–≤
- **–£—á–µ—Ç —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç–∏**
  - –ó–∞–ø–∏—Å—å —É—Ä–æ–∂–∞—è –ø–æ –ø–æ–ª—è–º
  - –†–∞—Å—á–µ—Ç —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç–∏ —Å –≥–µ–∫—Ç–∞—Ä–∞

## üóÉ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
crop-tracker/
‚îú‚îÄ‚îÄ handlers/          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ field_handler.go
‚îÇ   ‚îú‚îÄ‚îÄ sowing_handler.go
‚îÇ   ‚îî‚îÄ‚îÄ harvest_handler.go
‚îú‚îÄ‚îÄ models/           # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ field.go
‚îÇ   ‚îú‚îÄ‚îÄ sowing.go
‚îÇ   ‚îî‚îÄ‚îÄ harvest.go
‚îú‚îÄ‚îÄ database/         # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SQLite
‚îÇ   ‚îî‚îÄ‚îÄ init.go
‚îú‚îÄ‚îÄ main.go          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îî‚îÄ‚îÄ go.mod / go.sum  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üì¨ API Endpoints

### –ü–æ–ª—è (Fields)

#### –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –ø–æ–ª–µ
```http
POST /fields
Content-Type: application/json

{
    "name": "–ü–æ–ª–µ 1",
    "area_ha": 15.5,
    "region": "–û—Ä–µ–Ω–±—É—Ä–≥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å"
}
```

#### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π
```http
GET /fields

Response:
[
    {
        "id": 1,
        "name": "–ü–æ–ª–µ 1",
        "area_ha": 15.5,
        "region": "–û—Ä–µ–Ω–±—É—Ä–≥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å"
    }
]
```

### –ü–æ—Å–µ–≤—ã (Sowings)

#### –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–µ–≤
```http
POST /sowings
Content-Type: application/json

{
    "field_id": 1,
    "crop": "–ü—à–µ–Ω–∏—Ü–∞",
    "sowed_at": "2025-04-06"
}
```

#### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ—Å–µ–≤–æ–≤
```http
GET /sowings
```

### –£—Ä–æ–∂–∞–π (Harvests)

#### –î–æ–±–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–± —É—Ä–æ–∂–∞–µ
```http
POST /harvests
Content-Type: application/json

{
    "field_id": 1,
    "crop": "–ü—à–µ–Ω–∏—Ü–∞",
    "yield_t_per_ha": 4.5
}
```

#### –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–± —É—Ä–æ–∂–∞–µ
```http
GET /harvests
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –¢–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç SQLite 
–≤ –ø–∞–º—è—Ç–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏–∑–æ–ª—è—Ü–∏–∏ –∏ –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

#### –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
```bash
go test -v ./...
```

#### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞
```bash
go test -v ./handlers  # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
go test -v ./models    # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –º–æ–¥–µ–ª–∏
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

#### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª—è–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–µ–π —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª–µ–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ—Å–µ–≤–∞–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å–µ–≤–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—è
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–µ–≤–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

#### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —É—Ä–æ–∂–∞–µ–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ–± —É—Ä–æ–∂–∞–µ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—Ä–æ–∂–∞—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é —Ç–µ—Å—Ç–æ–≤

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º:

1. –°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `_test.go`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `setupTestDB()` –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î
3. –í–∫–ª—é—á–∞–π—Ç–µ –∫–∞–∫ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–µ, —Ç–∞–∫ –∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏
4. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
5. –û—á–∏—â–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã –≤ defer-–±–ª–æ–∫–∞—Ö

#### –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–µ—Å—Ç–∞

```go
func Test–í–∞—à–∞–§—É–Ω–∫—Ü–∏—è(t *testing.T) {
    gin.SetMode(gin.TestMode)
    db := setupTestDB(t)
    defer db.Close()

    tests := []struct {
        name       string
        input      –í–∞—à–¢–∏–ø
        wantStatus int
        wantError  bool
    }{
        // –í–∞—à–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏
    }

    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∞
        })
    }
}
